{"ast":null,"code":"import _toConsumableArray from\"/Users/stefanpjanic/Desktop/mango_dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/stefanpjanic/Desktop/mango_dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/stefanpjanic/Desktop/mango_dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/stefanpjanic/Desktop/mango_dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/stefanpjanic/Desktop/mango_dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/stefanpjanic/Desktop/mango_dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/stefanpjanic/Desktop/mango_dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Layout,Typography}from\"antd\";import{Client as ConversationsClient}from\"@twilio/conversations\";import\"./assets/Conversation.css\";import\"./assets/ConversationSection.css\";import Conversation from\"./Conversation\";import{ConversationsList}from\"./ConversationsList\";import{HeaderItem}from\"./HeaderItem\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var client=require('twilio')('AC154267876e5925c71816684d9cc9d076','e120f9966a9cada9b22857e67d2ef0af');var DEV_URL='';if(process.env.NODE_ENV==='development'){DEV_URL='http://localhost:3000';}var Content=Layout.Content,Sider=Layout.Sider,Header=Layout.Header;var Text=Typography.Text;var deleteConvo=function deleteConvo(convoID){client.conversations.conversations(convoID).remove();};var ConversationsApp=/*#__PURE__*/function(_React$Component){_inherits(ConversationsApp,_React$Component);var _super=_createSuper(ConversationsApp);function ConversationsApp(props){var _this;_classCallCheck(this,ConversationsApp);_this=_super.call(this,props);_this.componentDidMount=function(){if(_this.state.loggedIn){_this.getToken();}};_this.logIn=function(name){if(name!==\"\"){localStorage.setItem(\"name\",name);_this.setState({name:name,loggedIn:true},_this.getToken);}};_this.getUsername=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var username;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:username=axios.get(\"\".concat(DEV_URL,\"/users\"))// .then((response) => this.setState({ token: (response.data.token) }))\n.then(function(response){return response.data;});return _context.abrupt(\"return\",username);case 2:case\"end\":return _context.stop();}}},_callee);}));_this.getToken=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var usrname;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.getUsername();case 2:usrname=_context2.sent;axios.get('https://sunglow-dotterel-5846.twil.io/chat-token?identity='+usrname)// .then((response) => this.setState({ token: (response.data.token) }))\n.then(function(response){_this.setState({token:response.data.token},_this.initConversations);});// .then((response) => console.log(response.data.token))\ncase 4:case\"end\":return _context2.stop();}}},_callee2);}));_this.initConversations=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:window.conversationsClient=ConversationsClient;_context3.next=3;return ConversationsClient.create(_this.state.token);case 3:_this.conversationsClient=_context3.sent;_this.conversationsClient.on(\"connectionStateChanged\",function(state){if(state===\"connecting\")_this.setState({status:\"default\"});if(state===\"connected\"){_this.setState({status:\"success\"});}if(state===\"disconnecting\")_this.setState({conversationsReady:false,status:\"default\"});if(state===\"disconnected\")_this.setState({conversationsReady:false,status:\"warning\"});if(state===\"denied\")_this.setState({conversationsReady:false,status:\"error\"});});_this.conversationsClient.on(\"conversationJoined\",function(conversation){_this.setState({conversations:[].concat(_toConsumableArray(_this.state.conversations),[conversation])});});_this.conversationsClient.on(\"conversationLeft\",function(thisConversation){_this.setState({conversations:_toConsumableArray(_this.state.conversations.filter(function(it){return it!==thisConversation;}))});});case 7:case\"end\":return _context3.stop();}}},_callee3);}));var _name=localStorage.getItem(\"name\")||\"\";_this.state={name:_name,loggedIn:true,token:null,conversationsReady:false,conversations:[],selectedConversationSid:null,newMessage:\"\",username:null};return _this;}_createClass(ConversationsApp,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,conversations=_this$state.conversations,selectedConversationSid=_this$state.selectedConversationSid,status=_this$state.status;var selectedConversation=conversations.find(function(it){return it.sid===selectedConversationSid;});console.log(selectedConversationSid);var conversationContent;if(selectedConversation){conversationContent=/*#__PURE__*/_jsx(Conversation,{conversationProxy:selectedConversation,myIdentity:this.state.name});}else if(status!==\"success\"){conversationContent=\"Loading your conversation!\";}else{conversationContent=\"\";}if(this.state.loggedIn){return/*#__PURE__*/_jsxs(\"div\",{className:\"conversations-window-wrapper\",children:[/*#__PURE__*/_jsxs(Header,{style:{display:\"flex\",padding:0,background:\"black\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"250px\",width:\"100%\",display:\"flex\"},children:[/*#__PURE__*/_jsx(HeaderItem,{style:{float:\"left\"},children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:/*#__PURE__*/_jsx(\"button\",{style:{float:\"left\",background:\"transparent\",color:\"white\"},children:\"HOME\"})})}),/*#__PURE__*/_jsx(HeaderItem,{style:{float:\"right\",marginLeft:\"auto\"}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"250px\",width:\"100%\",display:\"flex\",float:\"right\",marginLeft:\"50%\"},children:[/*#__PURE__*/_jsx(HeaderItem,{children:/*#__PURE__*/_jsx(\"a\",{href:\"/dashboard\",children:/*#__PURE__*/_jsx(\"button\",{style:{background:\"transparent\",color:\"white\"},children:\"DASHBOARD\"})})}),/*#__PURE__*/_jsx(HeaderItem,{children:/*#__PURE__*/_jsx(\"a\",{href:\"/app\",children:/*#__PURE__*/_jsx(\"button\",{style:{background:\"transparent\",color:\"white\"},children:\"INBOX\"})})}),/*#__PURE__*/_jsx(HeaderItem,{children:/*#__PURE__*/_jsx(\"a\",{href:\"/logout\",children:/*#__PURE__*/_jsx(\"button\",{style:{background:\"transparent\",color:\"white\"},children:\"LOGOUT\"})})})]})]}),/*#__PURE__*/_jsx(Layout,{className:\"conversations-window-container\",children:/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsx(Sider,{theme:\"light\",width:250,children:/*#__PURE__*/_jsx(ConversationsList,{conversations:conversations,selectedConversationSid:selectedConversationSid,onConversationClick:function onConversationClick(item){_this2.setState({selectedConversationSid:item.sid});}})}),/*#__PURE__*/_jsx(Content,{className:\"conversation-section\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"SelectedConversation\",children:[/*#__PURE__*/_jsxs(Header,{style:{display:\"flex\",padding:0,background:\"#222222\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:\"250px\",width:\"100%\",display:\"flex\",float:\"right\",marginLeft:\"auto\"},children:/*#__PURE__*/_jsx(Text,{strong:true,style:{color:\"white\",float:\"right\"},children:selectedConversation&&(selectedConversation.friendlyName||selectedConversation.sid)})}),/*#__PURE__*/_jsx(HeaderItem,{children:/*#__PURE__*/_jsx(\"button\",{onClick:deleteConvo(selectedConversationSid),style:{background:\"transparent\",color:\"white\"},children:\"REPORT\"})}),/*#__PURE__*/_jsx(HeaderItem,{children:/*#__PURE__*/_jsx(\"a\",{href:\"/review\",children:/*#__PURE__*/_jsx(\"button\",{style:{background:\"transparent\",color:\"white\"},children:\"REVIEW\"})})})]}),conversationContent]})})]})})]});}}}]);return ConversationsApp;}(React.Component);export default ConversationsApp;","map":{"version":3,"sources":["/Users/stefanpjanic/Desktop/mango_dev/react-chat/src/ConversationsApp.js"],"names":["React","Layout","Typography","Client","ConversationsClient","Conversation","ConversationsList","HeaderItem","axios","client","require","DEV_URL","process","env","NODE_ENV","Content","Sider","Header","Text","deleteConvo","convoID","conversations","remove","ConversationsApp","props","componentDidMount","state","loggedIn","getToken","logIn","name","localStorage","setItem","setState","getUsername","username","get","then","response","data","usrname","token","initConversations","window","conversationsClient","create","on","status","conversationsReady","conversation","thisConversation","filter","it","getItem","selectedConversationSid","newMessage","selectedConversation","find","sid","console","log","conversationContent","display","padding","background","maxWidth","width","float","color","marginLeft","item","friendlyName","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Layout, Typography } from \"antd\";\nimport { Client as ConversationsClient } from \"@twilio/conversations\";\n\n\nimport \"./assets/Conversation.css\";\nimport \"./assets/ConversationSection.css\";\n\n\nimport Conversation from \"./Conversation\";\nimport { ConversationsList } from \"./ConversationsList\";\nimport { HeaderItem } from \"./HeaderItem\";\nimport axios from 'axios';\n\nconst client = require('twilio')('AC154267876e5925c71816684d9cc9d076', 'e120f9966a9cada9b22857e67d2ef0af');\n\nlet DEV_URL = '';\nif (process.env.NODE_ENV === 'development') {\n  DEV_URL = 'http://localhost:3000';\n }\n\n\nconst { Content, Sider, Header } = Layout;\nconst { Text } = Typography;\nconst deleteConvo= function(convoID) {\n  client.conversations.conversations(convoID)\n                      .remove();\n};\n\n\nclass ConversationsApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const name =  localStorage.getItem(\"name\") || \"\";\n    \n\n    this.state = {\n      name,\n      loggedIn: true,\n      token: null,\n      conversationsReady: false,\n      conversations: [],\n      selectedConversationSid: null,\n      newMessage: \"\",\n      username: null\n    };\n  }\n\n  componentDidMount = () => {\n    if (this.state.loggedIn) {\n      this.getToken();\n    }\n  };\n\n  \n\n  logIn = (name) => {\n    if (name !== \"\") {\n      localStorage.setItem(\"name\", name);\n      this.setState({ name, loggedIn: true }, this.getToken);\n    }\n  };\n\n  getUsername = async () => {\n    const username=axios.get(`${DEV_URL}/users`)\n            // .then((response) => this.setState({ token: (response.data.token) }))\n                      .then((response) => {return response.data})\n    return username;\n  }\n\n  getToken = async () => {\n      var usrname=await this.getUsername();\n       axios.get('https://sunglow-dotterel-5846.twil.io/chat-token?identity='+usrname)\n            // .then((response) => this.setState({ token: (response.data.token) }))\n          .then((response) => {this.setState({ token: response.data.token}, this.initConversations)})\n          // .then((response) => console.log(response.data.token))\n\n  };\n\n  initConversations = async () => {\n    window.conversationsClient = ConversationsClient;\n    this.conversationsClient = await ConversationsClient.create(\n      this.state.token\n    );\n    \n\n    this.conversationsClient.on(\"connectionStateChanged\", (state) => {\n      if (state === \"connecting\")\n        this.setState({\n          status: \"default\"\n        });\n      if (state === \"connected\") {\n        this.setState({\n          status: \"success\"\n        });\n      }\n      if (state === \"disconnecting\")\n        this.setState({\n          conversationsReady: false,\n          status: \"default\"\n        });\n      if (state === \"disconnected\")\n        this.setState({\n          conversationsReady: false,\n          status: \"warning\"\n        });\n      if (state === \"denied\")\n        this.setState({\n          conversationsReady: false,\n          status: \"error\"\n        });\n    });\n    this.conversationsClient.on(\"conversationJoined\", (conversation) => {\n      this.setState({\n        conversations: [...this.state.conversations, conversation]\n      });\n    });\n    this.conversationsClient.on(\"conversationLeft\", (thisConversation) => {\n      this.setState({\n        conversations: [\n          ...this.state.conversations.filter((it) => it !== thisConversation)\n        ]\n      });\n    });\n  };\n\n  render() {\n    \n    const { conversations, selectedConversationSid, status } = this.state;\n    const selectedConversation = conversations.find(\n      (it) => it.sid === selectedConversationSid\n    );\n    console.log(selectedConversationSid)\n\n    let conversationContent;\n    if (selectedConversation) {\n      conversationContent = (\n        <Conversation\n          conversationProxy={selectedConversation}\n          myIdentity={this.state.name}\n        />\n      );\n    } else if (status !== \"success\") {\n      conversationContent = \"Loading your conversation!\";\n    } else {\n      conversationContent = \"\";\n    }\n\n    if (this.state.loggedIn) {\n      return (\n        <div className=\"conversations-window-wrapper\">\n          <Header\n              style={{ display: \"flex\", padding: 0, background: \"black\" }}\n            >\n              <div\n                style={{\n                  maxWidth: \"250px\",\n                  width: \"100%\",\n                  display: \"flex\",\n                  \n                }}\n                \n              >\n                <HeaderItem style={{ float: \"left\" }}>\n                    <a href=\"/\">\n                      <button style={{ float: \"left\", background: \"transparent\", color: \"white\" }}>HOME</button>\n                    </a>\n                   \n                   </HeaderItem>\n                   <HeaderItem style={{ float: \"right\", marginLeft: \"auto\"}}>\n                  \n                </HeaderItem>\n              </div>\n          \n              <div\n                style={{\n                  maxWidth: \"250px\",\n                  width: \"100%\",\n                  display: \"flex\",\n                  float: \"right\",\n                  marginLeft: \"50%\"\n                  \n                }}\n                \n              >\n                <HeaderItem >\n                  <a href=\"/dashboard\">\n                      <button style={{  background: \"transparent\", color: \"white\" }}>DASHBOARD</button>\n                    </a>\n                </HeaderItem>\n                <HeaderItem >\n                  <a href=\"/app\">\n                      <button style={{  background: \"transparent\", color: \"white\" }}>INBOX</button>\n                    </a>\n                </HeaderItem> \n                <HeaderItem >\n                  <a href=\"/logout\">\n                      <button style={{  background: \"transparent\", color: \"white\" }}>LOGOUT</button>\n                    </a>\n                </HeaderItem>\n                \n                \n                </div>\n                </Header>\n          <Layout className=\"conversations-window-container\">\n          \n            <Layout>\n              <Sider theme={\"light\"} width={250}>\n                <ConversationsList\n                  conversations={conversations}\n                  selectedConversationSid={selectedConversationSid}\n                  onConversationClick={(item) => {\n                    this.setState({ selectedConversationSid: item.sid });\n                  }}\n                />\n              </Sider>\n              <Content className=\"conversation-section\">\n              \n                <div id=\"SelectedConversation\">\n                <Header\n              style={{ display: \"flex\", padding: 0, background: \"#222222\" }}\n            >\n              <div\n                style={{\n                  maxWidth: \"250px\",\n                  width: \"100%\",\n                  display: \"flex\",\n                  float: \"right\",\n                  marginLeft: \"auto\"\n                  \n                }}\n                \n              >\n              <Text strong style={{ color: \"white\", float: \"right\"}}>\n                    {selectedConversation &&\n                      (selectedConversation.friendlyName ||\n                        selectedConversation.sid)}\n                  </Text>\n                  </div>\n                  <HeaderItem >\n                  \n                      <button onClick={deleteConvo(selectedConversationSid)} style={{  background: \"transparent\", color: \"white\" }}>REPORT</button>\n                    \n                </HeaderItem>\n                <HeaderItem >\n                  <a href=\"/review\">\n                      <button style={{  background: \"transparent\", color: \"white\" }}>REVIEW</button>\n                    </a>\n                </HeaderItem>\n                  </Header>\n                  {conversationContent}\n                  \n                  </div>\n                \n              </Content>\n            </Layout>\n          </Layout>\n        </div>\n      );\n    }\n\n    \n  }\n}\n\nexport default ConversationsApp;\n"]},"metadata":{},"sourceType":"module"}