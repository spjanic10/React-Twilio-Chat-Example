{"ast":null,"code":"\"use strict\";\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _slicedToArray2 = require(\"babel-runtime/helpers/slicedToArray\");\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _isInteger = require(\"babel-runtime/core-js/number/is-integer\");\n\nvar _isInteger2 = _interopRequireDefault(_isInteger);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pureObject = exports.nonNegativeInteger = exports.nonEmptyString = exports.stringifyReceivedType = exports.custom = exports.literal = exports.type = exports.asyncTypeCheck = exports.typeCheck = exports.runtimeTypeCheck = void 0;\n\nvar type = function type() {\n  for (var _len = arguments.length, checks = Array(_len), _key = 0; _key < _len; _key++) {\n    checks[_key] = arguments[_key];\n  }\n\n  return {\n    mode: 'type',\n    checks: checks\n  };\n};\n\nexports.type = type;\n\nvar literal = function literal() {\n  for (var _len2 = arguments.length, checks = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    checks[_key2] = arguments[_key2];\n  }\n\n  return {\n    mode: 'literal',\n    checks: checks\n  };\n};\n\nexports.literal = literal;\n\nvar custom = function custom() {\n  for (var _len3 = arguments.length, checks = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    checks[_key3] = arguments[_key3];\n  }\n\n  return {\n    mode: 'custom',\n    checks: checks\n  };\n};\n\nexports.custom = custom;\nvar nonEmptyString = custom(function (value) {\n  return [typeof value === 'string' && value.length > 0, 'a non-empty string'];\n});\nexports.nonEmptyString = nonEmptyString;\nvar nonNegativeInteger = custom(function (value) {\n  return [(0, _isInteger2.default)(value) && value >= 0, 'a non-negative integer'];\n});\nexports.nonNegativeInteger = nonNegativeInteger;\nvar pureObject = custom(function (value) {\n  return [(typeof value === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(value)) === 'object' && value !== null && !Array.isArray(value), 'a pure object (non-null and non-array)'];\n});\nexports.pureObject = pureObject;\n\nvar runtimeTypeCheck = function runtimeTypeCheck(rules, values, methodName) {\n  if (values.length > rules.length) {\n    throw new Error(\"Expected at most \" + rules.length + \" argument(s), but got \" + values.length);\n  }\n\n  while (values.length < rules.length) {\n    values.push(undefined);\n  }\n\n  values.forEach(function (value, index) {\n    var ruleDefinitions = rules[index];\n    var expectedTypes = [];\n    var customReceivedType = void 0;\n    var isValid = false;\n    ruleDefinitions.forEach(function (definition) {\n      switch (definition.mode) {\n        case 'type':\n          definition.checks.forEach(function (type) {\n            if (typeof type === 'string') {\n              isValid = isValid || (typeof value === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(value)) === type;\n              expectedTypes.push(\"of type \" + type);\n              return;\n            }\n\n            isValid = isValid || value instanceof type;\n            expectedTypes.push(\"an instance of \" + type.name);\n          });\n          break;\n\n        case 'literal':\n          definition.checks.forEach(function (type) {\n            isValid = isValid || value === type;\n            expectedTypes.push(typeof type === 'string' ? \"\\\"\" + type + \"\\\"\" : \"\" + type);\n          });\n          break;\n\n        case 'custom':\n          definition.checks.forEach(function (check) {\n            var _check = check(value),\n                _check2 = (0, _slicedToArray3.default)(_check, 3),\n                checkPassed = _check2[0],\n                typeDescription = _check2[1],\n                receivedType = _check2[2];\n\n            isValid = isValid || checkPassed;\n\n            if (!customReceivedType && receivedType) {\n              customReceivedType = receivedType;\n            }\n\n            expectedTypes.push(typeDescription);\n          });\n          break;\n      }\n    });\n\n    if (isValid) {\n      return;\n    }\n\n    var receivedType = customReceivedType || stringifyReceivedType(value);\n    var methodNameNotice = methodName ? \" of \" + methodName : '';\n    var lastIndex = expectedTypes.length - 1;\n    var expectedTypesString = lastIndex > 0 ? expectedTypes.slice(0, lastIndex).join(', ') + \" or \" + expectedTypes[lastIndex] : expectedTypes.join(', ');\n    var delimiter = lastIndex > 1 ? ';' : ',';\n    throw new Error(\"Argument \" + (index + 1) + methodNameNotice + \" is expected to be \" + expectedTypesString + delimiter + \" but got \" + receivedType);\n  });\n};\n\nexports.runtimeTypeCheck = runtimeTypeCheck;\n\nvar stringifyReceivedType = function stringifyReceivedType(value) {\n  var _a;\n\n  var receivedType = void 0;\n\n  if (['undefined', 'boolean', 'number', 'bigint', 'string'].includes(typeof value === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(value))) {\n    receivedType = typeof value === 'string' ? \"\\\"\" + value + \"\\\"\" : \"\" + value;\n  }\n\n  var constructorName = (_a = value === null || value === void 0 ? void 0 : value.constructor) === null || _a === void 0 ? void 0 : _a.name;\n\n  if ((typeof value === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(value)) === 'object' && constructorName !== 'Object') {\n    receivedType = value === null ? 'null' : \"instance of \" + constructorName;\n  }\n\n  if (!receivedType) {\n    receivedType = typeof value === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(value);\n  }\n\n  return receivedType;\n};\n\nexports.stringifyReceivedType = stringifyReceivedType;\n\nvar typeCheck = function typeCheck() {\n  for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    args[_key4] = arguments[_key4];\n  }\n\n  var finalRuleSet = _getRuleSet(args);\n\n  return function (target, propertyKey, descriptor) {\n    if (typeof descriptor.value !== 'function') {\n      throw new Error('The typeCheck decorator can only be applied to methods');\n    }\n\n    var originalMethod = descriptor.value;\n\n    descriptor.value = function () {\n      for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n\n      runtimeTypeCheck(finalRuleSet, args, originalMethod.name);\n      return originalMethod.apply(this, arguments);\n    };\n  };\n};\n\nexports.typeCheck = typeCheck;\n\nvar asyncTypeCheck = function asyncTypeCheck() {\n  for (var _len6 = arguments.length, args = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    args[_key6] = arguments[_key6];\n  }\n\n  var finalRuleSet = _getRuleSet(args);\n\n  return function (target, propertyKey, descriptor) {\n    if (typeof descriptor.value !== 'function') {\n      throw new Error('The asyncTypeCheck decorator can only be applied to methods');\n    }\n\n    var originalMethod = descriptor.value;\n\n    descriptor.value = function () {\n      for (var _len7 = arguments.length, args = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        args[_key7] = arguments[_key7];\n      }\n\n      try {\n        runtimeTypeCheck(finalRuleSet, args, originalMethod.name);\n      } catch (e) {\n        return _promise2.default.reject(e);\n      }\n\n      return originalMethod.apply(this, arguments);\n    };\n  };\n};\n\nexports.asyncTypeCheck = asyncTypeCheck;\n\nvar _getRuleSet = function _getRuleSet(args) {\n  var finalRuleSet = [];\n  args.forEach(function (arg) {\n    var finalArgumentRules = [];\n    var declaredRules = Array.isArray(arg) ? arg : [arg];\n    declaredRules.forEach(function (rule) {\n      if (['string', 'function'].includes(typeof rule === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(rule))) {\n        finalArgumentRules.push(type(rule));\n        return;\n      }\n\n      finalArgumentRules.push(rule);\n    });\n    finalRuleSet.push(finalArgumentRules);\n  });\n  return finalRuleSet;\n};","map":{"version":3,"sources":["/Users/stefanpjanic/Desktop/mango_dev/node_modules/@twilio/conversations/browser/util/typecheck.js"],"names":["_promise","require","_promise2","_interopRequireDefault","_slicedToArray2","_slicedToArray3","_typeof2","_typeof3","_isInteger","_isInteger2","obj","__esModule","default","Object","defineProperty","exports","value","pureObject","nonNegativeInteger","nonEmptyString","stringifyReceivedType","custom","literal","type","asyncTypeCheck","typeCheck","runtimeTypeCheck","_len","arguments","length","checks","Array","_key","mode","_len2","_key2","_len3","_key3","isArray","rules","values","methodName","Error","push","undefined","forEach","index","ruleDefinitions","expectedTypes","customReceivedType","isValid","definition","name","check","_check","_check2","checkPassed","typeDescription","receivedType","methodNameNotice","lastIndex","expectedTypesString","slice","join","delimiter","_a","includes","constructorName","constructor","_len4","args","_key4","finalRuleSet","_getRuleSet","target","propertyKey","descriptor","originalMethod","_len5","_key5","apply","_len6","_key6","_len7","_key7","e","reject","arg","finalArgumentRules","declaredRules","rule"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _slicedToArray2 = require(\"babel-runtime/helpers/slicedToArray\");\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _isInteger = require(\"babel-runtime/core-js/number/is-integer\");\n\nvar _isInteger2 = _interopRequireDefault(_isInteger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pureObject = exports.nonNegativeInteger = exports.nonEmptyString = exports.stringifyReceivedType = exports.custom = exports.literal = exports.type = exports.asyncTypeCheck = exports.typeCheck = exports.runtimeTypeCheck = void 0;\nvar type = function type() {\n    for (var _len = arguments.length, checks = Array(_len), _key = 0; _key < _len; _key++) {\n        checks[_key] = arguments[_key];\n    }\n\n    return {\n        mode: 'type',\n        checks: checks\n    };\n};\nexports.type = type;\nvar literal = function literal() {\n    for (var _len2 = arguments.length, checks = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        checks[_key2] = arguments[_key2];\n    }\n\n    return {\n        mode: 'literal',\n        checks: checks\n    };\n};\nexports.literal = literal;\nvar custom = function custom() {\n    for (var _len3 = arguments.length, checks = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        checks[_key3] = arguments[_key3];\n    }\n\n    return {\n        mode: 'custom',\n        checks: checks\n    };\n};\nexports.custom = custom;\nvar nonEmptyString = custom(function (value) {\n    return [typeof value === 'string' && value.length > 0, 'a non-empty string'];\n});\nexports.nonEmptyString = nonEmptyString;\nvar nonNegativeInteger = custom(function (value) {\n    return [(0, _isInteger2.default)(value) && value >= 0, 'a non-negative integer'];\n});\nexports.nonNegativeInteger = nonNegativeInteger;\nvar pureObject = custom(function (value) {\n    return [(typeof value === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(value)) === 'object' && value !== null && !Array.isArray(value), 'a pure object (non-null and non-array)'];\n});\nexports.pureObject = pureObject;\nvar runtimeTypeCheck = function runtimeTypeCheck(rules, values, methodName) {\n    if (values.length > rules.length) {\n        throw new Error(\"Expected at most \" + rules.length + \" argument(s), but got \" + values.length);\n    }\n    while (values.length < rules.length) {\n        values.push(undefined);\n    }\n    values.forEach(function (value, index) {\n        var ruleDefinitions = rules[index];\n        var expectedTypes = [];\n        var customReceivedType = void 0;\n        var isValid = false;\n        ruleDefinitions.forEach(function (definition) {\n            switch (definition.mode) {\n                case 'type':\n                    definition.checks.forEach(function (type) {\n                        if (typeof type === 'string') {\n                            isValid = isValid || (typeof value === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(value)) === type;\n                            expectedTypes.push(\"of type \" + type);\n                            return;\n                        }\n                        isValid = isValid || value instanceof type;\n                        expectedTypes.push(\"an instance of \" + type.name);\n                    });\n                    break;\n                case 'literal':\n                    definition.checks.forEach(function (type) {\n                        isValid = isValid || value === type;\n                        expectedTypes.push(typeof type === 'string' ? \"\\\"\" + type + \"\\\"\" : \"\" + type);\n                    });\n                    break;\n                case 'custom':\n                    definition.checks.forEach(function (check) {\n                        var _check = check(value),\n                            _check2 = (0, _slicedToArray3.default)(_check, 3),\n                            checkPassed = _check2[0],\n                            typeDescription = _check2[1],\n                            receivedType = _check2[2];\n\n                        isValid = isValid || checkPassed;\n                        if (!customReceivedType && receivedType) {\n                            customReceivedType = receivedType;\n                        }\n                        expectedTypes.push(typeDescription);\n                    });\n                    break;\n            }\n        });\n        if (isValid) {\n            return;\n        }\n        var receivedType = customReceivedType || stringifyReceivedType(value);\n        var methodNameNotice = methodName ? \" of \" + methodName : '';\n        var lastIndex = expectedTypes.length - 1;\n        var expectedTypesString = lastIndex > 0 ? expectedTypes.slice(0, lastIndex).join(', ') + \" or \" + expectedTypes[lastIndex] : expectedTypes.join(', ');\n        var delimiter = lastIndex > 1 ? ';' : ',';\n        throw new Error(\"Argument \" + (index + 1) + methodNameNotice + \" is expected to be \" + expectedTypesString + delimiter + \" but got \" + receivedType);\n    });\n};\nexports.runtimeTypeCheck = runtimeTypeCheck;\nvar stringifyReceivedType = function stringifyReceivedType(value) {\n    var _a;\n    var receivedType = void 0;\n    if (['undefined', 'boolean', 'number', 'bigint', 'string'].includes(typeof value === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(value))) {\n        receivedType = typeof value === 'string' ? \"\\\"\" + value + \"\\\"\" : \"\" + value;\n    }\n    var constructorName = (_a = value === null || value === void 0 ? void 0 : value.constructor) === null || _a === void 0 ? void 0 : _a.name;\n    if ((typeof value === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(value)) === 'object' && constructorName !== 'Object') {\n        receivedType = value === null ? 'null' : \"instance of \" + constructorName;\n    }\n    if (!receivedType) {\n        receivedType = typeof value === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(value);\n    }\n    return receivedType;\n};\nexports.stringifyReceivedType = stringifyReceivedType;\nvar typeCheck = function typeCheck() {\n    for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n    }\n\n    var finalRuleSet = _getRuleSet(args);\n    return function (target, propertyKey, descriptor) {\n        if (typeof descriptor.value !== 'function') {\n            throw new Error('The typeCheck decorator can only be applied to methods');\n        }\n        var originalMethod = descriptor.value;\n        descriptor.value = function () {\n            for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n                args[_key5] = arguments[_key5];\n            }\n\n            runtimeTypeCheck(finalRuleSet, args, originalMethod.name);\n            return originalMethod.apply(this, arguments);\n        };\n    };\n};\nexports.typeCheck = typeCheck;\nvar asyncTypeCheck = function asyncTypeCheck() {\n    for (var _len6 = arguments.length, args = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n        args[_key6] = arguments[_key6];\n    }\n\n    var finalRuleSet = _getRuleSet(args);\n    return function (target, propertyKey, descriptor) {\n        if (typeof descriptor.value !== 'function') {\n            throw new Error('The asyncTypeCheck decorator can only be applied to methods');\n        }\n        var originalMethod = descriptor.value;\n        descriptor.value = function () {\n            for (var _len7 = arguments.length, args = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n                args[_key7] = arguments[_key7];\n            }\n\n            try {\n                runtimeTypeCheck(finalRuleSet, args, originalMethod.name);\n            } catch (e) {\n                return _promise2.default.reject(e);\n            }\n            return originalMethod.apply(this, arguments);\n        };\n    };\n};\nexports.asyncTypeCheck = asyncTypeCheck;\nvar _getRuleSet = function _getRuleSet(args) {\n    var finalRuleSet = [];\n    args.forEach(function (arg) {\n        var finalArgumentRules = [];\n        var declaredRules = Array.isArray(arg) ? arg : [arg];\n        declaredRules.forEach(function (rule) {\n            if (['string', 'function'].includes(typeof rule === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(rule))) {\n                finalArgumentRules.push(type(rule));\n                return;\n            }\n            finalArgumentRules.push(rule);\n        });\n        finalRuleSet.push(finalArgumentRules);\n    });\n    return finalRuleSet;\n};"]},"metadata":{},"sourceType":"script"}